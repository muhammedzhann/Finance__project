import{r as n,W as F,j as s,S as h,u as w,a as A}from"./index-B1BljWgF.js";import{C as E}from"./Card-Dvz8H0un.js";import{I as P}from"./InputWrapper-CuGz88GV.js";import{I as H}from"./InputText-Dmrcm94f.js";import{S as y,s as O,a as L}from"./Separator-CUcbXHkB.js";import{U as M}from"./Avatar-e_BDgXeH.js";import{H as D}from"./HighlightText-BcvXlEK4.js";import{i as W,k as R,f as U,l as V,m as z,u as B,H as $,t as q}from"./useDocumentTitle-9eRnAQF4.js";const G={itemsPerPage:10,setItemsPerPage:()=>{},currentPage:0,setCurrentPage:()=>{},totalPages:0,transactionsIds:[],filter:"",setFilter:()=>{},categoryOpt:"",setCategOpt:()=>{},sortOpt:"",setSortOpt:()=>{},categoriesOpts:[]},T=n.createContext(G);function C(){const t=n.useContext(T);if(t===void 0)throw new Error("useTransactionsPageContext must be used within a TransactionsPageContext Provider");return t}function J(){const{filter:t,setFilter:e,categoryOpt:a,setCategOpt:i,sortOpt:c,setSortOpt:l,categoriesOpts:d}=C(),{isSmallScr:r}=n.useContext(F),u=n.useId(),m=n.useId(),[p,f]=n.useState(!1),[x,b]=n.useState(!1);function g(o){e(o.target.value.toLowerCase())}function N(o){l(o.target.value)}function v(o){i(o.target.value)}function S(){f(!p),b(!1)}function I(){b(!x),f(!1)}return s.jsxs("section",{className:"tranfilters",children:[s.jsx("div",{className:"tranfilters-search",children:s.jsx(P,{id:u,icon:s.jsx(h,{path:"search"}),children:s.jsx(H,{id:u,placeholder:"Search transaction",value:t,onChange:g})})}),r&&s.jsxs("div",{className:"tranfilters-icons",children:[s.jsx("span",{className:"tranfilters-icons-icon",onClick:I,children:s.jsx(h,{path:"sort-mobile"})}),s.jsx("span",{className:"tranfilters-icons-icon",onClick:S,children:s.jsx(h,{path:"filter-mobile"})})]}),(!r||x)&&s.jsx("div",{className:"tranfilters-sort",children:s.jsx(P,{id:m,label:"Sort by",icon:s.jsx(h,{path:"caret-down"}),children:s.jsx(y,{id:m,options:O,value:c,onChange:N})})}),(!r||p)&&s.jsx("div",{className:"tranfilters-category",children:s.jsx(P,{id:m,label:"Category",icon:s.jsx(h,{path:"caret-down"}),children:s.jsx(y,{id:m,options:d,value:a,onChange:v})})})]})}function K(){const{transactionsIds:t}=C();return s.jsxs("div",{className:"transtable",children:[s.jsxs("div",{className:"transtable-header",children:[s.jsx("span",{className:"transtable-hsender",children:"Recipient / Sender"}),s.jsx("span",{className:"transtable-hcategory",children:"Category"}),s.jsx("span",{className:"transtable-hdate",children:"Transaction Date"}),s.jsx("span",{className:"transtable-hamount",children:"Amount"})]}),s.jsxs("div",{className:"transtable-table",children:[!t.length&&s.jsx("p",{className:"transtable-table-empty",children:"No transactions to be displayed"}),t.map(e=>s.jsxs(n.Fragment,{children:[s.jsx(Q,{id:e}),s.jsx(L,{})]},e))]})]})}function Q({id:t}){const{filter:e}=C(),a=w(u=>W(u,t)),{name:i,avatar:c,amount:l,date:d,category:r}=a;return s.jsxs("div",{className:"transtable-row",children:[s.jsx("div",{className:"transtable-sender-img",children:s.jsx(M,{src:c,alt:i,name:i})}),s.jsx("span",{className:"transtable-sender-name ellip-text",children:s.jsx(D,{text:i,filter:e})}),s.jsx("span",{className:"transtable-category",children:r}),s.jsx("span",{className:"transtable-date",children:R(d)}),s.jsxs("span",{className:"transtable-amount","data-positive":l>0,children:[l>0?"+":"-","$",U(Math.abs(l))]})]})}function X({children:t}){const[e]=A(),[a,i]=n.useState(10),[c,l]=n.useState(1),[d,r]=n.useState(e.get("search")||""),u=w(V),m=n.useMemo(()=>{const o=[{label:"All tranasactions",value:"all"}];return u.forEach(j=>{o.push({value:j.toLowerCase(),label:j})}),o},[u]),[p,f]=n.useState(S()),[x,b]=n.useState(O[0].value),g=w(o=>z(o,d.trim(),p,x)),N=n.useMemo(()=>g.slice((c-1)*a,c*a),[g,c,a]),v=Math.ceil(g.length/a);function S(){var j;const o=(j=e.get("category"))==null?void 0:j.toLowerCase();return!o||!u.find(k=>k.toLowerCase()===o)?m[0].value:o}const I={itemsPerPage:a,setItemsPerPage:i,currentPage:c,setCurrentPage:l,totalPages:v,transactionsIds:N,filter:d,setFilter:r,categoryOpt:p,setCategOpt:f,sortOpt:x,setSortOpt:b,categoriesOpts:m};return s.jsx(T.Provider,{value:I,children:t})}function Y({currentPage:t,totalPages:e,onPageChange:a}){const i=()=>{const d=[];for(let r=1;r<=e;r++)d.push(s.jsx("button",{className:"pagin-number-btn","data-active":t===r,onClick:()=>a(r),children:r},r));return d};function c(){t!==1&&a(t-1)}function l(){t!==e&&a(t+1)}return s.jsxs("div",{className:"pagin",children:[s.jsxs("button",{className:"pagin-arrow-btn",onClick:c,disabled:t===1,children:[s.jsx("span",{className:"pagin-arrow-icon",children:s.jsx(h,{path:"caret-left"})}),s.jsx("span",{className:"pagin-arrow-label",children:"Prev"})]}),s.jsx("div",{className:"pagin-numbers",children:i()}),s.jsxs("button",{className:"pagin-arrow-btn",onClick:l,disabled:t===e,children:[s.jsx("span",{className:"pagin-arrow-label",children:"Next"}),s.jsx("span",{className:"pagin-arrow-icon",children:s.jsx(h,{path:"caret-right"})})]})]})}function is(){return B(q.transactions),s.jsx(X,{children:s.jsxs("section",{className:"transactions",children:[s.jsx($,{text:"Transactions"}),s.jsxs(E,{classname:"transactions-card",children:[s.jsx(J,{}),s.jsx(K,{}),s.jsx(Z,{})]})]})})}function Z(){const{totalPages:t,currentPage:e,setCurrentPage:a,transactionsIds:i}=C();return i.length?s.jsx(Y,{totalPages:t,currentPage:e,onPageChange:a}):s.jsx(s.Fragment,{})}export{is as default};
